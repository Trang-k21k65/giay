{% extends 'Base.html' %}

{% block js %}
    <script src="../../static/js/control-user.js"></script>
{% endblock %}

{% block content %}
    <!-- Content-->
    <div id="content" class="container bg-light shadow-lg" style="margin-top: 100px; max-width: 960px">
        <div>
            <img src="https://cdn-icons-png.flaticon.com/512/147/147140.png" alt="Image user" class="rounded-circle img-thumbnail w-25 d-block mx-auto mt-3">
            <h2 class="text-center mb-5">{{ user_detail.username}}</h2>
            {%- for category, message in get_flashed_messages(with_categories = true) %}
                <div class = "alert alert-warning">
                    {{ message }}
                </div>
            {%- endfor %}
            <!-- Full name -->
            <div>
                <label class="w-25 fw-bold">Full name</label>
                <label id="fullname" class="border-0 bg-light">{{ user_detail.fullname }}</label>
                <button class="border-0 bg-light float-end" onclick="clickEdit('fullname')">
                    <i class="fa fa-edit" style="font-size: 24px"></i>
                </button>

                <div id="editfullname" style="display: none">
                    <hr>
                    <form action="" method="post" class="container w-75" style="background-color: darkgray">
                        <div class="row pt-3">
                            <label class="w-25">New fullname</label>
                            <input type="text" class="form-control w-50" placeholder="Enter..." name="fullname" required>
                        </div>
                        <div class="d-flex justify-content-end py-3">
                            <button type="submit" class="btn btn-primary mx-1" onclick="closeEdit('fullname')">Save</button>
                            <button class="btn btn-dark me-5" onclick="closeEdit('fullname')">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
            <hr>

            <!-- Phone -->
            <div>
                <label class="w-25 fw-bold">Phone</label>
                <label id="phone" class="border-0 bg-light">{{ user_detail.phone }}</label>
                <button class="border-0 bg-light float-end" onclick="clickEdit('phone')">
                    <i class="fa fa-edit" style="font-size: 24px"></i>
                </button>

                <div id="editphone" style="display: none">
                    <hr>
                    <form action="" method="post" class="container w-75" style="background-color: darkgray">
                        <div class="row pt-3">
                            <label class="w-25">New phone</label>
                            <input type="tel" class="form-control w-50" placeholder="Enter phone..." name="phone">
                        </div>
                        <div class="d-flex justify-content-end py-3">
                            <button type="submit" class="btn btn-primary mx-1" onclick="closeEdit('phone')">Save</button>
                            <button class="btn btn-dark me-5" onclick="closeEdit('phone')">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
            <hr>

            <!-- Address -->
            <div>
                <label class="w-25 fw-bold">Address</label>
                <label id="address" class="border-0 bg-light">{{ user_detail.address }}</label>

                <button class="border-0 bg-light float-end" onclick="clickEdit('address')">
                    <i class="fa fa-edit" style="font-size: 24px"></i>
                </button>

                <div id="editaddress" style="display: none">
                    <hr>
                    <form action="" method="post" class="container w-75" style="background-color: darkgray">
                        <div class="row pt-3">
                            <label style="width: 20%">New address</label>
                            <input type="text" class="form-control w-75" placeholder="Enter addresss" name="address">
                        </div>
                        <div class="d-flex justify-content-end py-3">
                            <button type="submit" class="btn btn-primary mx-1" onclick="closeEdit('address')">Save</button>
                            <button class="btn btn-dark me-5" onclick="closeEdit('address')">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>
            <hr>

            <!-- Password -->
            <div class="pb-3">
                <label class="fw-bold">Change password</label>
                <button class="border-0 bg-light float-end" onclick="clickChangePsw()">
                    <i class="fa fa-edit" style="font-size: 24px"></i>
                </button>
                <div id="editpsw" style="display: none">
                    <hr>
                    <form method="post" class="container w-75" style="background-color: darkgray">
                        <div class="row pt-3">
                            <label style="width: 40%">Current password</label>
                            <input type="password" class="form-control w-50" name="currentpassword">
                        </div>
                        <div class="row pt-3">
                            <label style="width: 40%">New password</label>
                            <input id="new-psw" type="password" class="form-control w-50" name="newpassword"
                                   pattern="(?=.*[a-zA-Z])(?=.*\d)[A-Za-z\d]{8,15}"
                                    title="Contains 8-15 characters: letters, at least 1 number">
                        </div>
                        <div class="row pt-3">
                            <label style="width: 40%">Confirm new password</label>
                            <input type="password" class="form-control w-50" name="confirmnewpassword">
                        </div>
                        <div class="d-flex justify-content-end py-3">
                            <button type="submit" class="btn btn-primary mx-1" onclick="savePsw()">Save</button>
                            <button class="btn btn-dark me-5" onclick="closeChangePsw()">Cancel</button>
                        </div>
                    </form>
                </div>
            </div>

            <div id="admin" class="mx-auto">
                <script hidden>
                    showButton('{{ user_detail.admin_role }}')
                </script>
                <button class="btn btn-primary mb-2"><a href="/admin/order" class="text-white">Quản lý đơn hàng</a></button>
                <button class="btn btn-primary mb-2"><a href="/admin/product" class="text-white">Quản lý sản phẩm</a></button>
            </div>
        </div>
    </div>
{% endblock %}